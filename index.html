<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinnixPro - Discovery & Validation Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .status-select {
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            background-color: white;
            min-width: 150px;
        }
        .tag {
            display: inline-block;
            background-color: #e0e7ff;
            color: #4338ca;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin: 0.125rem;
        }
        th { cursor: pointer; }
        .sort-asc::after { content: ' ▲'; }
        .sort-desc::after { content: ' ▼'; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto bg-white p-6 rounded-xl shadow-lg">
        <!-- Header Section -->
        <div class="mb-6">
            <h1 class="text-3xl font-bold text-gray-800">Discovery & Validation Dashboard</h1>
            <p class="text-gray-600 mt-1">Tracking progress for Phase 1: Customer Discovery & Validation.</p>
        </div>

        <!-- KPI Dashboard -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-center">
            <div class="bg-gray-100 p-4 rounded-lg">
                <p class="text-sm font-medium text-gray-500">Total Prospects</p>
                <p id="kpi-total" class="text-2xl font-bold text-gray-800">0</p>
            </div>
            <div class="bg-blue-100 p-4 rounded-lg">
                <p class="text-sm font-medium text-blue-600">Interviews Completed</p>
                <p id="kpi-interviews" class="text-2xl font-bold text-blue-800">0</p>
            </div>
            <div class="bg-green-100 p-4 rounded-lg">
                <p class="text-sm font-medium text-green-600">Paying Customers</p>
                <p id="kpi-customers" class="text-2xl font-bold text-green-800">0</p>
            </div>
            <div class="bg-emerald-100 p-4 rounded-lg">
                <p class="text-sm font-medium text-emerald-600">MRR</p>
                <p id="kpi-mrr" class="text-2xl font-bold text-emerald-800">$0</p>
            </div>
        </div>

        <!-- Controls: Search and Add New -->
        <div class="flex flex-wrap justify-between items-center mb-4 gap-4">
            <div class="relative w-full md:w-1/3">
                <input type="text" id="search-input" placeholder="Search by name, company, or tag..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <svg class="w-5 h-5 text-gray-400 absolute top-1/2 left-3 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
            <button id="add-row-btn" class="bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                + Add New Prospect
            </button>
        </div>

        <!-- Table -->
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th data-sort="prospectName" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Prospect Name</th>
                        <th data-sort="company" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th>
                        <th data-sort="status" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                        <th data-sort="interviewDate" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Interview Date</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Key Pain Points</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Verbatim Quote</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Paying?</th>
                    </tr>
                </thead>
                <tbody id="table-body" class="bg-white divide-y divide-gray-200">
                    <!-- Rows will be dynamically inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const initialData = [
            { id: 1, prospectName: 'Jane Doe', company: 'Bright Agency', role: 'Founder', source: 'Waitlist', status: 'Interviewed', interviewDate: '2025-07-15', tags: 'Reporting Delays, Spreadsheet Hell, Margin Tracking', quote: 'I feel like I\'m driving by looking in the rearview mirror. I don\'t know I\'ve lost money until the month is over.', mvp: true, paying: true, mrr: 29 },
            { id: 2, prospectName: 'John Smith', company: 'Code Consultants', role: 'Head of Delivery', source: 'LinkedIn', status: 'Scheduled', interviewDate: '2025-07-18', tags: 'Budget Overruns, Scope Creep', quote: '', mvp: false, paying: false, mrr: 0 },
            { id: 3, prospectName: 'Emily White', company: 'DesignCo', role: 'Project Manager', source: 'Waitlist', status: 'Outreach Sent', interviewDate: '', tags: '', quote: '', mvp: false, paying: false, mrr: 0 },
            { id: 4, prospectName: 'David Green', company: 'Innovate Solutions', role: 'COO', source: 'Referral', status: 'No Response', interviewDate: '', tags: 'Forecasting', quote: '', mvp: false, paying: false, mrr: 0 }
        ];

        let tableData = [...initialData];
        let sortConfig = { key: null, direction: 'ascending' };

        const tableBody = document.getElementById('table-body');
        const addRowBtn = document.getElementById('add-row-btn');
        const searchInput = document.getElementById('search-input');

        const statusOptions = ['Identified', 'Outreach Sent', 'Scheduled', 'Interviewed', 'Onboarding', 'Declined', 'No Response'];

        function renderTable() {
            const searchTerm = searchInput.value.toLowerCase();
            let filteredData = tableData.filter(item =>
                item.prospectName.toLowerCase().includes(searchTerm) ||
                item.company.toLowerCase().includes(searchTerm) ||
                item.tags.toLowerCase().includes(searchTerm)
            );
            
            if (sortConfig.key) {
                filteredData.sort((a, b) => {
                    if (a[sortConfig.key] < b[sortConfig.key]) {
                        return sortConfig.direction === 'ascending' ? -1 : 1;
                    }
                    if (a[sortConfig.key] > b[sortConfig.key]) {
                        return sortConfig.direction === 'ascending' ? 1 : -1;
                    }
                    return 0;
                });
            }

            tableBody.innerHTML = '';
            filteredData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${item.prospectName}</div><div class="text-sm text-gray-500">${item.role}</div></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.company}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <select class="status-select" data-id="${item.id}">
                            ${statusOptions.map(opt => `<option value="${opt}" ${item.status === opt ? 'selected' : ''}>${opt}</option>`).join('')}
                        </select>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.interviewDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${item.tags.split(',').map(tag => tag.trim() ? `<span class="tag">${tag.trim()}</span>` : '').join('')}</td>
                    <td class="px-6 py-4"><div class="text-sm text-gray-700 max-w-xs truncate" title="${item.quote}">${item.quote}</div></td>
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <input type="checkbox" data-id="${item.id}" class="paying-checkbox h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500" ${item.paying ? 'checked' : ''}>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            updateKPIs();
        }

        function updateKPIs() {
            document.getElementById('kpi-total').textContent = tableData.length;
            document.getElementById('kpi-interviews').textContent = tableData.filter(d => d.status === 'Interviewed').length;
            const payingCustomers = tableData.filter(d => d.paying);
            document.getElementById('kpi-customers').textContent = payingCustomers.length;
            const totalMRR = payingCustomers.reduce((sum, item) => sum + item.mrr, 0);
            document.getElementById('kpi-mrr').textContent = `$${totalMRR}`;
        }

        addRowBtn.addEventListener('click', () => {
            const newId = tableData.length > 0 ? Math.max(...tableData.map(item => item.id)) + 1 : 1;
            tableData.unshift({
                id: newId, prospectName: 'New Prospect', company: 'Company Name', role: 'Role', source: 'Manual', status: 'Identified', interviewDate: '', tags: '', quote: '', mvp: false, paying: false, mrr: 0
            });
            renderTable();
        });

        tableBody.addEventListener('change', (e) => {
            const id = parseInt(e.target.dataset.id);
            const item = tableData.find(d => d.id === id);
            if (e.target.classList.contains('status-select')) {
                item.status = e.target.value;
            } else if (e.target.classList.contains('paying-checkbox')) {
                item.paying = e.target.checked;
                item.mrr = item.paying ? 29 : 0; // Simplified assumption
            }
            renderTable();
        });
        
        searchInput.addEventListener('input', renderTable);
        
        document.querySelectorAll('th[data-sort]').forEach(th => {
            th.addEventListener('click', () => {
                const key = th.dataset.sort;
                if (sortConfig.key === key && sortConfig.direction === 'ascending') {
                    sortConfig.direction = 'descending';
                } else {
                    sortConfig.direction = 'ascending';
                }
                sortConfig.key = key;
                
                document.querySelectorAll('th[data-sort]').forEach(header => {
                    header.classList.remove('sort-asc', 'sort-desc');
                });
                th.classList.add(sortConfig.direction === 'ascending' ? 'sort-asc' : 'sort-desc');

                renderTable();
            });
        });

        renderTable();
    </script>
</body>
</html>
